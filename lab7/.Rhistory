library("tidyverse")
library("janitor")
install.packages("palmerpenguins")
library("palmerpenguins")
penguins <- penguins
penguins %>% #loads the data and pipes it to the filter function
filter(species=="Adelie") %>% #pulls out only the Adelie penguins
summarize(mean_body_mass=mean(body_mass_g, na.rm=T), #calculates the mean
n=n()) #number of observations
View(penguins)
penguins %>%
count(species)
penguins %>%
summarize(species)
penguins %>%
summarize(.)
penguins %>%
summarize(species)
penguins %>%
filter(body_mass_g)
penguins %>%
filter(species, body_mass_g)
penguins %>%
select(species, body_mass_g)
penguins %>%
filter(species=="Adelie") %>%
summarize(mean_body_mass=mean(body_mass_g, na.rm=T),
n=n())
penguins %>%
filter(species=="Adelie") %>%
summarize(sd_body_mass=sd(body_mass_g, na.rm=T),
n=n())
penguins %>%
filter(species=="Adelie") %>%
summarize(sd_body_mass=sd(body_mass_g, na.rm=T), mean_body_mass=mean(body_mass_g, na.rm=T)
n=n())
penguins %>%
filter(species=="Adelie") %>%
summarize(sd_body_mass=sd(body_mass_g, na.rm=T), mean_body_mass=mean(body_mass_g, na.rm=T),
n=n())
penguins %>%
filter(species=="Chinstrap") %>%
summarize(sd_body_mass=sd(body_mass_g, na.rm=T), mean_body_mass=mean(body_mass_g, na.rm=T),
n=n())
penguins %>%
filter(species=="Gentoo") %>%
summarize(sd_body_mass=sd(body_mass_g, na.rm=T), mean_body_mass=mean(body_mass_g, na.rm=T),
n=n())
penguins %>%
group_by(species)
penguins %>%
group_by(species) %>%
summarize(sd_body_mass=sd(body_mass_g, na.rm=T), mean_body_mass=mean(body_mass_g, na.rm=T),
n=n())
penguins %>%
group_by(species) %>% # grouping by a categorical variable, can't do it by a numerical variable
summarize(sd_body_mass=sd(body_mass_g, na.rm=T), mean_body_mass=mean(body_mass_g, na.rm=T),
n=n())
msleep
msleep %>%
group_by(vore)
msleep %>%
group_by(vore) %>%
summarize(mean_bodywt=mean(bodywt, na.rm=T), min_bodywt=min(bodywt, na.rm=T), max_bodywt=max(bodywt, na.rm=T), total_bodywt=sum(bodywt, na.rm=T))
msleep %>%
group_by(vore) %>%
summarize(mean_bodywt=mean(bodywt, na.rm=T), min_bodywt=min(bodywt, na.rm=T), max_bodywt=max(bodywt, na.rm=T), total_bodywt=sum(bodywt, na.rm=T), n=n())
msleep %>%
group_by(vore) %>%
summarize(mean_bodywt=mean(bodywt, na.rm=T), min_bodywt=min(bodywt, na.rm=T), max_bodywt=max(bodywt, na.rm=T), total_bodywt=sum(bodywt, na.rm=T), n=n())
msleep %>%
group_by(order)
summarize(mean_brainwt=mean(brainwt, na.rm = T)
msleep %>%
msleep %>%
group_by(order) %>%
summarize(mean_brainwt=mean(brainwt, na.rm = T))
msleep %>%
group_by(order) %>%
summarize(mean_brainwt=mean(brainwt, na.rm = TRUE))
summarize(mean_brainwt=mean(brainwt)
msleep %>%
msleep %>%
group_by(order) %>%
summarize(mean_brainwt=mean(brainwt))
msleep %>%
group_by(order) %>%
summarize(mean_brainwt=mean(brainwt, na.rm=TRUE))
msleep %>%
group_by(order) %>%
summarize(mean_brainwt=mean(brainwt)
msleep %>%
group_by(order) %>%
summarize(mean_brainwt=mean(brainwt))
msleep %>%
filter(order==Cetacea)
msleep %>%
filter(order=="Cetacea")
msleep %>%
filter(order=="Cetacea") %>%
select(order, genus, brainwt)
penguins %>%
group_by(species, island) %>%
summarize(n=n(), .groups= 'keep') #.groups= 'keep' is used to keep the grouping variable in the output
penguins %>%
group_by(species, island)
penguins %>%
group_by(species, island) %>%
summarize(mean_bill_length_mm=mean(bill_length_mm, na.rm = T), .groups = 'keep')
penguins %>%
count(species, island, sex)
penguins %>%
filter(sex=="NA")
penguins %>%
filter(sex!="female" | sex!="male")
penguins %>%
filter(sex="NA")
penguins %>%
filter(sex=="NA")
penguins %>%
select(sex=="NA")
penguins %>%
filter(sex=="NA")
names(penguins)
penguins %>%
filter(sex=="NA")
names(penguins)
x <- penguins %>%
group_by(species, island) %>%
summarize(mean_bill_length_mm=mean(bill_length_mm, na.rm = T), .groups = 'keep')
z <- penguins %>%
group_by(species, island) %>%
summarize(mean_bill_length_mm=mean(bill_length_mm, na.rm = T), .groups = 'drop_last')
penguins %>%
count(species, island, sex)
y <- penguins %>%
group_by(species, island) %>%
summarize(mean_bill_length_mm=mean(bill_length_mm, na.rm = T), .groups = 'drop')
x %>% summarize(n=n())
y %>% summarize(n=n())
z %>% summarize(n=n())
What if we wanted to apply `summarize()` in order to produce distinct counts over multiple variables; i.e. species, island, and sex? Although this isn't a lot of coding you can image that with a lot of variables it would be cumbersome.
What if we wanted to apply `summarize()` in order to produce distinct counts over multiple variables; i.e. species, island, and sex? Although this isn't a lot of coding you can image that with a lot of variables it would be cumbersome.
z %>% summarize(n=n()) # drop species and keep island
penguins %>%
count(species, island, sex)
penguins %>%
summarize(distinct_species = n_distinct(species),
distinct_island = n_distinct(island),
distinct_sex = n_distinct(sex))
penguins %>%
summarize(across(c(species, island, sex), n_distinct))
penguins %>%
summarize(across(where(is.numeric), mean, na.rm=T)) %>%
select(!year)
penguins %>%
summarize(across(where(is.numeric), \(x)mean(x, na.rm=T)))
penguins %>%
summarize(across(c(species, island, sex), \(x) n_distinct(x, na.rm=T)))
penguins %>%
summarize(across(c(species, island, sex), \(x) n_distinct(x, na.rm=T))) # The function takes x (each column that we specified) and applies n_distinct
penguins %>%
summarize(across(where(is.numeric), mean, na.rm=T)) %>%
select(!year) #removes the year variable
penguins %>%
group_by(sex) %>%
summarize(across(contains("mm"), mean, na.rm=T))
penguins %>%
group_by(species)
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), \(x) mean(x, na.rm=T)))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), \(x) sd(x, na.rm=T)))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T))))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T))),n=())
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=())
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=()))
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T),n=()))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=()))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=n()))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T))),n=n())
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
fisheries <- read_csv("data/fisheries.csv")
summary(fisheries)
dim(fisheries)
summary(fisheries)
dim(fisheries)
fisheries %>%
count(country)
fisheries %>%
count(country) %>%
summarize(n_country=n_distinct(country))
fisheries %>%
count(country)
fisheries %>%
summarize(n_country=n_distinct(country))
class(fisheries)
fisheries %>%
summarize(asfis_species_number)
View(fisheries)
fisheries %>%
summarize(asfis_species_number, catch)
glimpse(fisheries)
fisheries %>%
summarize(asfis_species_number, catch, n=n())
fisheries %>%
summarize(asfis_species_number, catch, n=n(catch))
fisheries %>%
summarize(asfis_species_number, catch)
fisheries %>%
group_by(isscaap_taxonomic_group)
fisheries %>%
group_by(isscaap_taxonomic_group) %>%
summarize(catch)
fisheries %>%
group_by(isscaap_taxonomic_group) %>%
summarize(total_catch= sum(catch, na.rm=T))
fisheries %>%
group_by(asfis_species_number) %>%
summarize(n_catch=n_distinct(catch))
fisheries %>%
summarize(across(where(is.numeric), max, na.rm=T))
fisheries %>%
count(country, catch)
fisheries %>%
summarize(across(c(country, years, catch)))
fisheries %>%
summarize(across(c(country, year, catch)))
fisheries %>%
summarize(across(c(country, year, catch), na.rm=T))
fisheries %>%
summarize(across(c(country, year, catch)), na.rm=T)
fisheries %>%
summarize(across(c(country, year, catch, na.rm=T)))
fisheries %>%
summarize(across(c(country, year, catch)), na.rm=T)
fisheries %>%
summarize(across(c(country, year, catch)), \(x)=n.distinct, na.rm=T)
fisheries %>%
summarize(across(c(country, year, catch)), \(x)=n.distinct(catch, na.rm=T))
fisheries %>%
summarize(across(c(country, year, catch)), n.distinct(catch, na.rm=T))
fisheries %>%
group_by(country) %>%
summarize(across(c(country, year, catch)),na.rm=T)
fisheries %>%
group_by(country) %>%
summarize(across(c(year, catch)),na.rm=T)
fisheries %>%
group_by(country) %>%
summarize(across(where(is.numeric), \(x)max(x,na.rm=T)))
fisheries %>%
group_by(country) %>%
summarize(across(where(is.numeric), \(x)max(x,na.rm=T))) %>%
arrange(-catch)
fisheries %>%
group_by(country) %>%
summarize(across(where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
group_by(country) %>%
summarize(-1,across(where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
group_by(country) %>%
summarize(across(-1, where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
summarize(n_taxa=n_distinct(asfis_species_number))
fisheries %>%
group_by(isscaap_taxonomic_group) %>%
summarize(total_catch= sum(catch, na.rm=T)) %>%
arrange(-total_catch)
fisheries %>%
filter(asfis_species_name=="Osteichthyes")
fisheries %>%
filter(asfis_species_name!="Osteichthyes")
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
summarize(n_name=n_distinct(asfis_species_name))
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
group_by(asfis_species_name) %>%
summarize(n_name=n_distinct(asfis_species_name))
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
group_by(asfis_species_name) %>%
summarize(n_name=sum(catch, na.rm = T))
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
group_by(asfis_species_name) %>%
summarize(n_name=sum(catch, na.rm = T)) %>%
arrange(-n_name)
fisheries %>%
group_by(country) %>%
summarize(across(-1, where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country) %>%
summarize(across(-1, where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country) %>%
summarize(across(where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country) %>%
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country)
