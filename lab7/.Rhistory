summarize(distinct_species = n_distinct(species),
distinct_island = n_distinct(island),
distinct_sex = n_distinct(sex))
penguins %>%
summarize(across(c(species, island, sex), n_distinct))
penguins %>%
summarize(across(where(is.numeric), mean, na.rm=T)) %>%
select(!year)
penguins %>%
summarize(across(where(is.numeric), \(x)mean(x, na.rm=T)))
penguins %>%
summarize(across(c(species, island, sex), \(x) n_distinct(x, na.rm=T)))
penguins %>%
summarize(across(c(species, island, sex), \(x) n_distinct(x, na.rm=T))) # The function takes x (each column that we specified) and applies n_distinct
penguins %>%
summarize(across(where(is.numeric), mean, na.rm=T)) %>%
select(!year) #removes the year variable
penguins %>%
group_by(sex) %>%
summarize(across(contains("mm"), mean, na.rm=T))
penguins %>%
group_by(species)
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), \(x) mean(x, na.rm=T)))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), \(x) sd(x, na.rm=T)))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T))))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T))),n=())
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=())
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=()))
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T),n=()))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=()))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T)),n=n()))
penguins %>%
group_by(species) %>%
summarize(across(contains("mm"), list(mean=\(x) mean(x, na.rm=T), sd=\(x) sd(x, na.rm=T))),n=n())
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
fisheries <- read_csv("data/fisheries.csv")
summary(fisheries)
dim(fisheries)
summary(fisheries)
dim(fisheries)
fisheries %>%
count(country)
fisheries %>%
count(country) %>%
summarize(n_country=n_distinct(country))
fisheries %>%
count(country)
fisheries %>%
summarize(n_country=n_distinct(country))
class(fisheries)
fisheries %>%
summarize(asfis_species_number)
View(fisheries)
fisheries %>%
summarize(asfis_species_number, catch)
glimpse(fisheries)
fisheries %>%
summarize(asfis_species_number, catch, n=n())
fisheries %>%
summarize(asfis_species_number, catch, n=n(catch))
fisheries %>%
summarize(asfis_species_number, catch)
fisheries %>%
group_by(isscaap_taxonomic_group)
fisheries %>%
group_by(isscaap_taxonomic_group) %>%
summarize(catch)
fisheries %>%
group_by(isscaap_taxonomic_group) %>%
summarize(total_catch= sum(catch, na.rm=T))
fisheries %>%
group_by(asfis_species_number) %>%
summarize(n_catch=n_distinct(catch))
fisheries %>%
summarize(across(where(is.numeric), max, na.rm=T))
fisheries %>%
count(country, catch)
fisheries %>%
summarize(across(c(country, years, catch)))
fisheries %>%
summarize(across(c(country, year, catch)))
fisheries %>%
summarize(across(c(country, year, catch), na.rm=T))
fisheries %>%
summarize(across(c(country, year, catch)), na.rm=T)
fisheries %>%
summarize(across(c(country, year, catch, na.rm=T)))
fisheries %>%
summarize(across(c(country, year, catch)), na.rm=T)
fisheries %>%
summarize(across(c(country, year, catch)), \(x)=n.distinct, na.rm=T)
fisheries %>%
summarize(across(c(country, year, catch)), \(x)=n.distinct(catch, na.rm=T))
fisheries %>%
summarize(across(c(country, year, catch)), n.distinct(catch, na.rm=T))
fisheries %>%
group_by(country) %>%
summarize(across(c(country, year, catch)),na.rm=T)
fisheries %>%
group_by(country) %>%
summarize(across(c(year, catch)),na.rm=T)
fisheries %>%
group_by(country) %>%
summarize(across(where(is.numeric), \(x)max(x,na.rm=T)))
fisheries %>%
group_by(country) %>%
summarize(across(where(is.numeric), \(x)max(x,na.rm=T))) %>%
arrange(-catch)
fisheries %>%
group_by(country) %>%
summarize(across(where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
group_by(country) %>%
summarize(-1,across(where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
group_by(country) %>%
summarize(across(-1, where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
summarize(n_taxa=n_distinct(asfis_species_number))
fisheries %>%
group_by(isscaap_taxonomic_group) %>%
summarize(total_catch= sum(catch, na.rm=T)) %>%
arrange(-total_catch)
fisheries %>%
filter(asfis_species_name=="Osteichthyes")
fisheries %>%
filter(asfis_species_name!="Osteichthyes")
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
summarize(n_name=n_distinct(asfis_species_name))
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
group_by(asfis_species_name) %>%
summarize(n_name=n_distinct(asfis_species_name))
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
group_by(asfis_species_name) %>%
summarize(n_name=sum(catch, na.rm = T))
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
group_by(asfis_species_name) %>%
summarize(n_name=sum(catch, na.rm = T)) %>%
arrange(-n_name)
fisheries %>%
group_by(country) %>%
summarize(across(-1, where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country) %>%
summarize(across(-1, where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country) %>%
summarize(across(where(is.numeric), na.rm=T)) %>%
arrange(-catch)
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country) %>%
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country)
library(tidyverse)
library(janitor)
options(scipen=999)
ecosphere <- read_csv("data/ecs21351-sup-0003-SupplementS1.csv", skip=2) %>%
#load the data and skip the first two rows
clean_names() %>%
#clean the variable names
slice(1:(n() - 18))
#remove the footer
names(ecosphere)
summary(ecosphere)
glimpse(ecosphere)
ecosphere$order %>% unique()
ecosphere %>%
summarize(n_order=n_distinct(order))
ecosphere %>%
group_by(habitat) %>%
summarize(total_r_cbc=sum(range_in_cbc, na.rm = T)) %>%
arrange(-total_r_cbc)
ecosphere %>%
filter(urban_affiliate=="Yes") %>%
summarize(min_wra=min(winter_range_area, na.rm=T), max_wra=max(winter_range_area, na.rm = T), mean_wra=mean(winter_range_area, na.rm=T))
ecosphere <- ecosphere %>%
mutate(mass_g=10^log10_mass)
ecosphere %>%
group_by(migratory_strategy) %>%
summarize(mean_mass_g=mean(mass_g, na.rm=T)) %>%
arrange(-mean_mass_g)
ecosphere %>%
group_by(habitat, diet) %>%
filter(migratory_strategy=="Irruptive") %>%
summarize(ave_popu_size=mean(population_size, na.rm=T), .groups = "keep") %>%
arrange(-ave_popu_size)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
arrange(-mass_g)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000, "threatened", "stable")) %>%
arrange(population_size)
#group_by(conservation_status) %>%
#summarize(n_speices=n_distinct(scientific_name))
ecosphere %>%
mutate(conservation_status=population_size>300000->"threatened" )) %>%
ecosphere %>%
mutate(conservation_status=population_size>300000,"threatened" )) %>%
ecosphere %>%
mutate(conservation_status=population_size>300000,"threatened" ) %>%
arrange(population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size>300000,"threatened", "stable", population_size<300000)) %>%
arrange(population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened")) %>%
mutate(conservation_status=ifelse(population_size>300000, "stable"))
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened")) %>%
mutate(conservation_status=ifelse(population_size>300000, "stable")) %>%
arrange(population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", NA)) %>%
mutate(conservation_status=ifelse(population_size>300000, "stable")) %>%
arrange(population_size)
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable") %>%
arrange(population_size)
ecosphere %>%
ecosphere %>%
filter(population_size==300000) %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable")) %>%
arrange(population_size)
ecosphere %>%
filter(population_size!=300000) %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable")) %>%
arrange(population_size)
#group_by(conservation_status) %>%
#summarize(n_speices=n_distinct(scientific_name))
ecosphere %>%
filter(population_size!=300000) %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable")) %>%
arrange(population_size) %>%
group_by(conservation_status) %>%
summarize(n_speices=n_distinct(scientific_name))
ecosphere %>%
filter(population_size!=300000) %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable")) %>%
arrange(-population_size) %>%
group_by(conservation_status) %>%
summarize(n_speices=n_distinct(scientific_name))
ecosphere
ecosphere %>%
filter(population_size!=300000) %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable")) %>%
arrange(-population_size) %>%
group_by(conservation_status) %>%
summarize(n_speices=n_distinct(scientific_name))
ecosphere %>%
filter(population_size!=300000) %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable")) %>%
arrange(-population_size)
ecosphere %>%
filter(habitat=="Woodland")
ecosphere %>%
filter(habitat=="Woodland") %>%
group_by(diet, life_expectancy)
ecosphere %>%
filter(habitat=="Woodland") %>%
group_by(diet, life_expectancy) %>%
summarize(ave_pop_size=mean(population_size, na.rm=T))
ecosphere %>%
filter(habitat=="Woodland") %>%
group_by(diet, life_expectancy) %>%
summarize(ave_pop_size=mean(population_size, na.rm=T), .groups="keep")
ecosphere %>%
filter(habitat=="Woodland") %>%
group_by(diet, life_expectancy) %>%
summarize(ave_pop_size=mean(population_size, na.rm=T), .groups="keep") %>%
arrange(-ave_pop_size)
ecosphere %>%
filter(population_size!="NA" & habitat=="Woodland") %>%
group_by(diet, life_expectancy) %>%
summarize(ave_pop_size=mean(population_size, na.rm=T), .groups="keep") %>%
arrange(-ave_pop_size)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
summarize(max_mass_g=max(mass_g))
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
filter(max(mass_g))
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long")
knitr::opts_chunk$set(echo = TRUE)
fisheries %>%
filter(between(year, 2002, 2012)) %>%
group_by(country) %>%
summarize(total_catch=sum(catch, na.rm=T)) %>%
arrange(-total_catch)
fisheries <- read_csv("data/fisheries.csv")
fisheries %>%
filter(asfis_species_name!="Osteichthyes") %>%
group_by(asfis_species_number, asfis_species_name) %>%
summarize(total_catch=sum(catch, na.rm = T), .groups = "keep") %>%
arrange(-total_catch)
fisheries %>%
filter(asfis_species_name=="Engraulis ringens") %>%
group_by(country) %>%
summarize(total_catch=sum(catch, na.rm = T)) %>%
arrange(-total_catch)
msleep %>%
filter(order =="Carnivora") %>%
count(conservation, sort = T) # sorts descending order by count
superhero_info %>%
mutate(height=height/100) %>%
filter(alignment == "good") %>%
arrange(-height)
superhero_info <- read_csv("data/heroes_information.csv", na = c("", "-99", "-")) %>% clean_names()
superhero_powers <- read_csv("data/super_hero_powers.csv", na = c("", "-99", "-")) %>% clean_names()
superhero_info %>%
mutate(height=height/100) %>%
filter(alignment == "good") %>%
arrange(-height)
superhero_powers %>%
filter(agility == "TRUE" & stealth== "TRUE" & super_strength=="TRUE" & stamina=="TRUE") %>%
summarize(n_names=n_distinct(hero_names))
superhero_powers %>% # calls the superhero_powers df
mutate(across(-1, ~ ifelse(. == TRUE, 1, 0))) %>%
# across the entire data frame, apply the following condition to every cell in all columns except the first column: if the data in the cell is "TRUE", convert it into "1", if the data is not "TRUE", convert it into "0"
mutate(total_powers = rowSums(across(-1))) %>%
# add the sum of numbers for each row (except the first column) and name the new column "total_powers"
select(hero_names, total_powers) %>%
# only show data of the 2 columns "hero_names" and "total_powers"
arrange(-total_powers)
# sort the data in descending order by "total_powers"
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
arrange(-mass_g)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
select(common_name, scientific_name, mass_g)
ecosphere %>%
group_by(habitat) %>%
summarize(n_species=n_distinct(scientific_name))
ecosphere %>%
group_by(habitat) %>%
summarize(n_species=n_distinct(scientific_name), na.rm=T)
ecosphere %>%
group_by(habitat) %>%
summarize(n_species=n_distinct(scientific_name, na.rm=T))
ecosphere %>%
group_by(habitat) %>%
summarize(n_species=n_distinct(scientific_name, na.rm=T)) %>%
arrange(-n_species)
ecosphere %>%
group_by(habitat) %>%
summarize(n_species=n_distinct(scientific_name)) %>%
arrange(-n_species)
gabon_5 <- filter(gabon, LandUse %in% c("Park","Logging", "Neither"))
gabon <- read_csv("data/IvindoData_DryadVersion.csv")
gabon <- gabon %>%
mutate(HuntCat = as.factor(HuntCat)) %>%
mutate(LandUse = as.factor(LandUse)) %>%
mutate(TransectID = as.factor(TransectID))
is.factor(gabon$HuntCat)
is.factor(gabon$LandUse)
is.factor(gabon$TransectID)
gabon_2 <- filter(gabon, LandUse == "Park")
gabon_3 <- filter(gabon, LandUse == "Logging")
gabon_4 <- filter(gabon, LandUse == "Neither")
gabon_5 <- filter(gabon, LandUse %in% c("Park","Logging", "Neither"))
table(gabon_5$LandUse)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "stable", NA)) %>%
arrange(-population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA", population_size)) %>%
arrange(-population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
arrange(-population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", "NA")) %>%
arrange(-population_size)
ecosphere <- ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", "NA")) %>%
arrange(-population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", "NA")) %>%
arrange(-population_size)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
select(common_name, scientific_name, mass_g)
arrange(-mass_g)
ecosphere <- ecosphere %>%
mutate(mass_g=10^log10_mass)
ecosphere %>%
group_by(migratory_strategy) %>%
summarize(mean_mass_g=mean(mass_g, na.rm=T)) %>%
arrange(-mean_mass_g)
ecosphere %>%
group_by(habitat, diet) %>%
filter(migratory_strategy=="Irruptive") %>%
summarize(ave_popu_size=mean(population_size, na.rm=T), .groups = "keep") %>%
arrange(-ave_popu_size)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
select(common_name, scientific_name, mass_g)
arrange(-mass_g)
ecosphere <- ecosphere %>%
mutate(mass_g=10^log10_mass)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
select(common_name, scientific_name, mass_g)
arrange(-mass_g)
ecosphere <- read_csv("data/ecs21351-sup-0003-SupplementS1.csv", skip=2) %>%
#load the data and skip the first two rows
clean_names() %>%
#clean the variable names
slice(1:(n() - 18))
#remove the footer
names(ecosphere)
summary(ecosphere)
ecosphere$order %>% unique()
ecosphere %>%
summarize(n_order=n_distinct(order))
ecosphere %>%
group_by(habitat) %>%
summarize(n_species=n_distinct(scientific_name)) %>%
arrange(-n_species)
ecosphere %>%
filter(urban_affiliate=="Yes") %>%
summarize(min_wra=min(winter_range_area, na.rm=T), max_wra=max(winter_range_area, na.rm = T), mean_wra=mean(winter_range_area, na.rm=T))
ecosphere <- ecosphere %>%
mutate(mass_g=10^log10_mass)
ecosphere %>%
group_by(migratory_strategy) %>%
summarize(mean_mass_g=mean(mass_g, na.rm=T)) %>%
arrange(-mean_mass_g)
ecosphere %>%
group_by(habitat, diet) %>%
filter(migratory_strategy=="Irruptive") %>%
summarize(ave_popu_size=mean(population_size, na.rm=T), .groups = "keep") %>%
arrange(-ave_popu_size)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
select(common_name, scientific_name, mass_g)
arrange(-mass_g)
ecosphere %>%
filter(diet=="Vertebrates" & life_expectancy=="Long" & urban_affiliate=="No" & migratory_strategy=="Long") %>%
select(common_name, scientific_name, mass_g) %>%
arrange(-mass_g)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", "NA")) %>%
arrange(-population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", conservation_status)) %>%
arrange(-population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", conservation_status)) %>%
arrange(-population_size)
group_by(conservation_status) %>%
summarize(n_speices=n_distinct(scientific_name))
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", conservation_status)) %>%
arrange(-population_size)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", conservation_status)) %>%
arrange(-population_size) %>%
group_by(conservation_status) %>%
summarize(n_speices=n_distinct(scientific_name))
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", conservation_status)) %>%
filter(population_size==300000 | population_size=="NA")
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", conservation_status)) %>%
filter(population_size==300000 | population_size==NA)
ecosphere %>%
mutate(conservation_status=ifelse(population_size<300000,"threatened", "NA")) %>%
mutate(conservation_status=ifelse(population_size>300000,"stable", conservation_status)) %>%
filter(population_size==300000 | is.na(population_size))
